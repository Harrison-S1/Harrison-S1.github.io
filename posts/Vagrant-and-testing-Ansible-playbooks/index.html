<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Vagrant and testing Ansible playbooks" /><meta property="og:locale" content="en" /><meta name="description" content="Download Vagrant" /><meta property="og:description" content="Download Vagrant" /><link rel="canonical" href="/posts/Vagrant-and-testing-Ansible-playbooks/" /><meta property="og:url" content="/posts/Vagrant-and-testing-Ansible-playbooks/" /><meta property="og:site_name" content="Samâ€™s 2nd brain" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-03T14:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Vagrant and testing Ansible playbooks" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-07-03T14:00:00+00:00","datePublished":"2022-07-03T14:00:00+00:00","description":"Download Vagrant","headline":"Vagrant and testing Ansible playbooks","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/Vagrant-and-testing-Ansible-playbooks/"},"url":"/posts/Vagrant-and-testing-Ansible-playbooks/"}</script><title>Vagrant and testing Ansible playbooks | Sam's 2nd brain</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Sam's 2nd brain"><meta name="application-name" content="Sam's 2nd brain"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/54186142?s=400&u=fabf11da8c31b3afad7d8fbc76732b43734a685c&v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Sam's 2nd brain</a></div><div class="site-subtitle font-italic">brain of brain</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/Harrison-S1" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Vagrant and testing Ansible playbooks</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Vagrant and testing Ansible playbooks</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1656856800" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 3, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/username">Sam</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="883 words"> <em>4 min</em> read</span></div></div></div><div class="post-content"><h2 id="download-vagrant"><span class="mr-2">Download Vagrant</span><a href="#download-vagrant" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>You are best going to to the main <a href="https://www.vagrantup.com/downloads">site</a> BUT</p><h3 id="debian"><span class="mr-2">Debian</span><a href="#debian" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>curl <span class="nt">-fsSL</span> https://apt.releases.hashicorp.com/gpg | <span class="nb">sudo </span>apt-key add -
<span class="nb">sudo </span>apt-add-repository <span class="s2">"deb [arch=amd64] https://apt.releases.hashicorp.com </span><span class="si">$(</span>lsb_release <span class="nt">-cs</span><span class="si">)</span><span class="s2"> main"</span>
<span class="nb">sudo </span>apt-get update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt-get <span class="nb">install </span>vagrant
</pre></table></code></div></div><h3 id="centos"><span class="mr-2">Centos</span><a href="#centos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>yum <span class="nb">install</span> <span class="nt">-y</span> yum-utils
<span class="nb">sudo </span>yum-config-manager <span class="nt">--add-repo</span> https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo
<span class="nb">sudo </span>yum <span class="nt">-y</span> <span class="nb">install </span>vagrant
</pre></table></code></div></div><h3 id="ansible"><span class="mr-2">Ansible</span><a href="#ansible" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install vagrant</span>
  <span class="na">vars</span><span class="pi">:</span>
    <span class="na">vagrant_version</span><span class="pi">:</span> <span class="s">2.2.19</span>
  <span class="na">unarchive</span><span class="pi">:</span>
    <span class="na">src</span><span class="pi">:</span> <span class="s">https://releases.hashicorp.com/vagrant//vagrant__linux_amd64.zip</span>
    <span class="na">dest</span><span class="pi">:</span> <span class="s">/usr/local/bin</span>
    <span class="na">remote_src</span><span class="pi">:</span> <span class="s">yes</span>
    <span class="na">mode</span><span class="pi">:</span> <span class="m">0755</span>
    <span class="na">owner</span><span class="pi">:</span> <span class="s">root</span>
    <span class="na">group</span><span class="pi">:</span> <span class="s">root</span>
</pre></table></code></div></div><p>Create a directory to store your Vagrant configs and move into it. Within this dir create a folder for each Vagrant box you want to create, because Vagrant will create a <strong><em>.vagrant</em></strong> per box.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">mkdir </span>vagrant <span class="o">&amp;&amp;</span> <span class="nb">cd </span>vagrant
</pre></table></code></div></div><blockquote><p><a href="https://www.vagrantup.com/docs">Offical Docâ€™s</a></p></blockquote><h3 id="setting-update-vagrant-file"><span class="mr-2">Setting update Vagrant file</span><a href="#setting-update-vagrant-file" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">mkdir </span>ubuntu-22.04-nfs <span class="o">&amp;&amp;</span> <span class="nb">cd </span>ubuntu-22.04-nfs
</pre></table></code></div></div><p>and create your Vagrant config file</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>vim Vagrantfile
</pre></table></code></div></div><p>and paste the following.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre>Vagrant.configure<span class="o">(</span><span class="s2">"2"</span><span class="o">)</span> <span class="k">do</span> |config|
  config.vm.box <span class="o">=</span> <span class="s2">"ubuntu/jammy64"</span>
  config.vm.hostname <span class="o">=</span> <span class="s2">"nfs-s"</span>
  config.vm.provision <span class="s2">"ansible"</span>, playbook: <span class="s2">"playbook.yml"</span>
  config.vm.provider :virtualbox <span class="k">do</span> |v|
    v.name <span class="o">=</span> <span class="s2">"nfs-s"</span>
    v.memory <span class="o">=</span> 512
    v.cpus <span class="o">=</span> 1
    v.customize <span class="o">[</span><span class="s2">"modifyvm"</span>, :id, <span class="s2">"--natdnshostresolver1"</span>, <span class="s2">"on"</span><span class="o">]</span>
    v.customize <span class="o">[</span><span class="s2">"modifyvm"</span>, :id, <span class="s2">"--ioapic"</span>, <span class="s2">"on"</span><span class="o">]</span>
  config.vm.network :private_network, ip: <span class="s2">"192.168.56.10"</span>  
  end 
end
</pre></table></code></div></div><p>This basicly builds a <a href="https://releases.ubuntu.com/22.04/">Ubuntu Jammy Jellyfish (22.04)</a> box with <em>512M</em> of RAM, <em>1 cpu</em> and names it <em>nfs-s</em> . For testing your playbooks line 4 is where it happen. Your setting Ansible as the provision and telling it what playbook to use.</p><h3 id="playbook"><span class="mr-2">Playbook</span><a href="#playbook" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Lets create a playbook to set up a nfs share.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>vim playbook.yml
</pre></table></code></div></div><p>and paste the below.</p><blockquote><p>Change the IP to what you have set up for your Vagrant box</p></blockquote><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="nn">---</span>
 <span class="pi">-</span> <span class="na">hosts</span><span class="pi">:</span> <span class="s">all</span>
   <span class="na">gather_facts</span><span class="pi">:</span> <span class="s">yes</span>
   <span class="na">become</span><span class="pi">:</span> <span class="no">true</span>
   <span class="na">tasks</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">install nfs kernel server</span>
       <span class="na">package</span><span class="pi">:</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s">latest</span>
        <span class="na">name</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">nfs-kernel-server</span>
        <span class="pi">-</span> <span class="s">apache2</span>

     <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Create a nfs directory if it does not exist</span>
       <span class="na">ansible.builtin.file</span><span class="pi">:</span>
         <span class="na">path</span><span class="pi">:</span> <span class="s">/srv/nfs</span>
         <span class="na">state</span><span class="pi">:</span> <span class="s">directory</span>
         <span class="na">owner</span><span class="pi">:</span> <span class="s">nobody</span>
         <span class="na">group</span><span class="pi">:</span> <span class="s">nogroup</span>
         <span class="na">mode</span><span class="pi">:</span> <span class="s1">'</span><span class="s">0777'</span>
  
     <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Add the nfs dir to exports file</span>
       <span class="na">ansible.builtin.lineinfile</span><span class="pi">:</span>
         <span class="na">path</span><span class="pi">:</span> <span class="s">/etc/exports</span>
         <span class="na">line</span><span class="pi">:</span> <span class="s">/srv/nfs  192.168.56.0/24(rw,sync,no_subtree_check)</span>
         <span class="na">create</span><span class="pi">:</span> <span class="s">yes</span>

     <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">NFS apply change configrue</span>
       <span class="na">shell</span><span class="pi">:</span> <span class="s">systemctl reload nfs;exportfs -a</span>
</pre></table></code></div></div><p>Now just run</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>vagrant up
</pre></table></code></div></div><p>Your output will look like this</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
</pre><td class="rouge-code"><pre>sam@msi:~/vagrant/vagrant-ansible/ubuntu-22.04-nfs<span class="nv">$ </span>vagrant up
Bringing machine <span class="s1">'default'</span> up with <span class="s1">'virtualbox'</span> provider...
<span class="o">==&gt;</span> default: Importing base box <span class="s1">'ubuntu/jammy64'</span>...
<span class="o">==&gt;</span> default: Matching MAC address <span class="k">for </span>NAT networking...
<span class="o">==&gt;</span> default: Checking <span class="k">if </span>box <span class="s1">'ubuntu/jammy64'</span> version <span class="s1">'20220513.0.0'</span> is up to date...
<span class="o">==&gt;</span> default: Setting the name of the VM: nfs-s
<span class="o">==&gt;</span> default: Clearing any previously <span class="nb">set </span>network interfaces...
<span class="o">==&gt;</span> default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
    default: Adapter 2: hostonly
    default: Adapter 3: hostonly
    default: Adapter 4: hostonly
    default: Adapter 5: hostonly
    default: Adapter 6: hostonly
<span class="o">==&gt;</span> default: Forwarding ports...
    default: 22 <span class="o">(</span>guest<span class="o">)</span> <span class="o">=&gt;</span> 2222 <span class="o">(</span>host<span class="o">)</span> <span class="o">(</span>adapter 1<span class="o">)</span>
<span class="o">==&gt;</span> default: Running <span class="s1">'pre-boot'</span> VM customizations...
<span class="o">==&gt;</span> default: Booting VM...
<span class="o">==&gt;</span> default: Waiting <span class="k">for </span>machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: 
    default: Vagrant insecure key detected. Vagrant will automatically replace
    default: this with a newly generated keypair <span class="k">for </span>better security.
    default: 
    default: Inserting generated public key within guest...
    default: Removing insecure key from the guest <span class="k">if </span>it<span class="s1">'s present...
    default: Key inserted! Disconnecting and reconnecting using new SSH key...
==&gt; default: Machine booted and ready!
==&gt; default: Checking for guest additions in VM...
    default: The guest additions on this VM do not match the installed version of
    default: VirtualBox! In most cases this is fine, but in rare cases it can
    default: prevent things such as shared folders from working properly. If you see
    default: shared folder errors, please make sure the guest additions within the
    default: virtual machine match the version of VirtualBox you have installed on
    default: your host and reload your VM.
    default: 
    default: Guest Additions Version: 6.0.0 r127566
    default: VirtualBox Version: 6.1
==&gt; default: Setting hostname...
==&gt; default: Configuring and enabling network interfaces...
==&gt; default: Mounting shared folders...
    default: /vagrant =&gt; /home/sam/vagrant/vagrant-ansible/ubuntu-22.04-nfs
==&gt; default: Running provisioner: ansible...
    default: Running ansible-playbook...

PLAY [all] *********************************************************************

TASK [Gathering Facts] *********************************************************
ok: [default]

TASK [install nfs kernel server] ***********************************************
changed: [default]

TASK [Create a nfs directory if it does not exist] *****************************
changed: [default]

TASK [Add the nfs dir to exports file] *****************************************
changed: [default]

TASK [NFS apply change configrue] **********************************************
changed: [default]

PLAY RECAP *********************************************************************
default                    : ok=5    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

</span></pre></table></code></div></div><p>The beginning section is the Vagrant box set up. The end section is where the playbook is deployed. If there are errors with the playbook they will show up there. Nice and easy.</p><p>Yes you can test your playbooks with <a href="https://molecule.readthedocs.io/en/latest/">Ansible Molecule</a> using <a href="https://www.vagrantup.com/">Vagrant</a>, <a href="https://podman.io/">Podman</a> and <a href="https://www.docker.com/">Docker</a>, but thats for next time.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/ansible/'>Ansible</a>, <a href='/categories/howto-s/'>howto's</a>, <a href='/categories/linux/'>linux</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ansible/" class="post-tag no-text-decoration" >ansible</a> <a href="/tags/linux/" class="post-tag no-text-decoration" >linux</a> <a href="/tags/howto-s/" class="post-tag no-text-decoration" >howto's</a> <a href="/tags/sysops/" class="post-tag no-text-decoration" >sysops</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Vagrant+and+testing+Ansible+playbooks+-+Sam%27s+2nd+brain&url=%2Fposts%2FVagrant-and-testing-Ansible-playbooks%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Vagrant+and+testing+Ansible+playbooks+-+Sam%27s+2nd+brain&u=%2Fposts%2FVagrant-and-testing-Ansible-playbooks%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2FVagrant-and-testing-Ansible-playbooks%2F&text=Vagrant+and+testing+Ansible+playbooks+-+Sam%27s+2nd+brain" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=%2Fposts%2FVagrant-and-testing-Ansible-playbooks%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/atlas-project-part-two/">Atlas project - part two</a><li><a href="/posts/atlas-project-part-one/">Atlas Project - part one</a><li><a href="/posts/aws-storage-gateway/">Creating a Storage Gateway in AWS</a><li><a href="/posts/Expanding-EBS-root-volume/">Expanding EBS root volume</a><li><a href="/posts/CloudWatch-Monitor-EC2-Linux-services-and-set-alarms/">CloudWatch Monitor EC2 Linux services and set alarms</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/howto-s/">howto's</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/sysops/">sysops</a> <a class="post-tag" href="/tags/homelab/">homelab</a> <a class="post-tag" href="/tags/cloud/">cloud</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/ansible/">ansible</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/terraform/">terraform</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/ansbile-basics/"><div class="card-body"> <em class="small" data-ts="1621951200" data-df="ll" > May 25, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Ansible basics</h3><div class="text-muted small"><p> Example CMD Command can be run as a user with sudo rights. ansible-playbook updateubuntu.yml --ask-sudo-pass By adding the -k the users ssh password will be promoted for. Use if SSH keys are no...</p></div></div></a></div><div class="card"> <a href="/posts/Ansible-sdding-a-new-servers/"><div class="card-body"> <em class="small" data-ts="1622556000" data-df="ll" > Jun 1, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Ansible adding a new servers</h3><div class="text-muted small"><p> Copying SSH-key On your new server, create the management user. Password for this user is in Keepass. Once done, log into the management server as the management user. You need to copy over the ss...</p></div></div></a></div><div class="card"> <a href="/posts/Ansible-creating-a-inventory-list/"><div class="card-body"> <em class="small" data-ts="1623333600" data-df="ll" > Jun 10, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Ansible creating a inventory list</h3><div class="text-muted small"><p> Create a inventory.yml file in your users ansible file vim inventory.yml And use the layout below. All yaml files start with â€” all: â€“ All server will be in this group. children: â€“Is sayi...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/spining-up-Uptime-Kuma/" class="btn btn-outline-primary" prompt="Older"><p>Spining up Uptime Kuma</p></a> <a href="/posts/Expanding-EBS-root-volume/" class="btn btn-outline-primary" prompt="Newer"><p>Expanding EBS root volume</p></a></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> Â© 2023 <a href="https://github.com/Harrison-S1">Sam</a>.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/howto-s/">howto's</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/sysops/">sysops</a> <a class="post-tag" href="/tags/homelab/">homelab</a> <a class="post-tag" href="/tags/cloud/">cloud</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/ansible/">ansible</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/terraform/">terraform</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-TSY28JSKB0"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-TSY28JSKB0'); }); </script>
